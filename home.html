<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AnomCAT">
    <meta name="theme-color" content="#0d0d0f">
    <meta name="description" content="AnomCAT - Enterprise Crypto Dashboard">
    
    <title>Home | AnomCAT</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%233b82f6'/%3E%3Ctext x='50' y='65' font-size='50' text-anchor='middle' fill='white'%3EA%3C/text%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%233b82f6'/%3E%3Ctext x='50' y='65' font-size='50' text-anchor='middle' fill='white'%3EA%3C/text%3E%3C/svg%3E">
    
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app">
        <!-- Top Navigation Bar -->
        <header class="top-bar">
            <div class="top-bar-left">
                <a href="home.html" class="logo">
                    <div class="logo-icon">A</div>
                    <span>AnomCAT</span>
                </a>
            </div>
            <div class="top-bar-right">
                <div class="currency-toggle">
                    <button class="currency-btn active" data-currency="BTC">BTC</button>
                    <button class="currency-btn" data-currency="EUR">EUR</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Portfolio Overview -->
            <div class="card mb-6">
                <div class="card-header">
                    <div>
                        <p class="card-subtitle">Total Portfolio</p>
                        <h2 class="balance-large" data-balance="main">0.00000000 BTC</h2>
                        <p class="balance-secondary" data-balance="secondary">€0.00</p>
                    </div>
                    <span class="badge badge-success" data-stat="status">Active</span>
                </div>
                
                <!-- Period Selector -->
                <div class="period-selector">
                    <button class="period-btn" data-period="1D">1D</button>
                    <button class="period-btn" data-period="1W">1W</button>
                    <button class="period-btn active" data-period="1M">1M</button>
                    <button class="period-btn" data-period="3M">3M</button>
                    <button class="period-btn" data-period="1Y">1Y</button>
                    <button class="period-btn" data-period="ALL">All</button>
                </div>
                
                <!-- Chart -->
                <div class="chart-container">
                    <canvas id="portfolioChart"></canvas>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <a href="#deposit" class="quick-action" id="depositAction">
                    <div class="quick-action-icon deposit">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                    </div>
                    <span class="quick-action-label">Deposit</span>
                </a>
                <a href="#withdraw" class="quick-action">
                    <div class="quick-action-icon withdraw">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14"/>
                        </svg>
                    </div>
                    <span class="quick-action-label">Withdraw</span>
                </a>
                <a href="#trade" class="quick-action">
                    <div class="quick-action-icon trade">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
                            <polyline points="17 6 23 6 23 12"/>
                        </svg>
                    </div>
                    <span class="quick-action-label">Trade</span>
                </a>
                <a href="#swap" class="quick-action">
                    <div class="quick-action-icon swap">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="17 1 21 5 17 9"/>
                            <path d="M3 11V9a4 4 0 0 1 4-4h14"/>
                            <polyline points="7 23 3 19 7 15"/>
                            <path d="M21 13v2a4 4 0 0 1-4 4H3"/>
                        </svg>
                    </div>
                    <span class="quick-action-label">Swap</span>
                </a>
            </div>

            <!-- Stats Grid -->
            <div class="stat-grid mb-6">
                <div class="stat-item">
                    <div class="stat-label">Initial</div>
                    <div class="stat-value" data-stat="initial">0.00000000 BTC</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Profit</div>
                    <div class="stat-value text-success" data-stat="profit">+0.00000000 BTC</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">ROI</div>
                    <div class="stat-value text-success" data-stat="roi">+0.00%</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Monthly Return</div>
                    <div class="stat-value text-success">+1.3%</div>
                </div>
            </div>

            <!-- Bot Status Card -->
            <div class="card mb-6">
                <div class="card-header">
                    <h3 class="card-title">CAT Bot Trading</h3>
                    <span class="badge badge-success" data-stat="status">Active</span>
                </div>
                <div class="stat-grid">
                    <div class="stat-item">
                        <div class="stat-label">Strategy</div>
                        <div class="stat-value" style="font-size: 0.875rem;">Momentum + Mean Reversion</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Trades</div>
                        <div class="stat-value" data-stat="trades">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Win Rate</div>
                        <div class="stat-value" data-stat="winrate">--</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Expected</div>
                        <div class="stat-value text-success">+1.3%/mo</div>
                    </div>
                </div>
            </div>

            <!-- Deposit Form -->
            <div class="card" id="depositCard">
                <h3 class="card-title mb-4">Deposit BTC</h3>
                <form id="depositForm">
                    <div class="form-group">
                        <label class="form-label" for="depositAmount">Amount</label>
                        <input type="number" id="depositAmount" class="form-input" placeholder="0.00000000" step="0.00000001" min="0" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">
                        Deposit & Start Bot
                    </button>
                </form>
                <p class="form-hint text-center mt-4">Demo mode: No real BTC required. Your balance is simulated.</p>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="home.html" class="nav-item active">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                    </svg>
                </div>
                <span class="nav-label">Home</span>
            </a>
            <a href="wallet.html" class="nav-item">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                    </svg>
                </div>
                <span class="nav-label">Wallet</span>
            </a>
            <a href="transactions.html" class="nav-item">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"/>
                    </svg>
                </div>
                <span class="nav-label">Activity</span>
            </a>
            <a href="analytics.html" class="nav-item">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                    </svg>
                </div>
                <span class="nav-label">Analytics</span>
            </a>
            <a href="settings.html" class="nav-item">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                    </svg>
                </div>
                <span class="nav-label">Settings</span>
            </a>
        </nav>
    </div>

    <script src="assets/js/app.js"></script>
    <script>
        // Chart instance
        let portfolioChart = null;
        
        // Initialize chart
        function initChart() {
            const ctx = document.getElementById('portfolioChart').getContext('2d');
            const chartData = AnomCAT.generateChartData(30);
            
            const gradient = ctx.createLinearGradient(0, 0, 0, 250);
            gradient.addColorStop(0, 'rgba(59, 130, 246, 0.3)');
            gradient.addColorStop(1, 'rgba(59, 130, 246, 0)');
            
            portfolioChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: chartData.map(d => {
                        const date = new Date(d.time);
                        return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                    }),
                    datasets: [{
                        label: 'Portfolio Value',
                        data: chartData.map(d => d.value),
                        borderColor: '#3b82f6',
                        backgroundColor: gradient,
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0,
                        pointHoverRadius: 6,
                        pointHoverBackgroundColor: '#3b82f6',
                        pointHoverBorderColor: '#fff',
                        pointHoverBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: '#1e1e21',
                            titleColor: '#f5f5f7',
                            bodyColor: '#a1a1aa',
                            borderColor: '#27272a',
                            borderWidth: 1,
                            padding: 12,
                            displayColors: false,
                            callbacks: {
                                label: function(context) {
                                    return AnomCAT.currency === 'EUR' 
                                        ? AnomCAT.formatEUR(context.raw)
                                        : AnomCAT.formatBTC(context.raw);
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: '#71717a',
                                font: {
                                    size: 11
                                },
                                maxTicksLimit: 6
                            }
                        },
                        y: {
                            display: true,
                            grid: {
                                color: '#27272a',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#71717a',
                                font: {
                                    size: 11
                                },
                                maxTicksLimit: 5,
                                callback: function(value) {
                                    if (AnomCAT.currency === 'EUR') {
                                        return '€' + value.toLocaleString();
                                    }
                                    return value.toFixed(4) + ' BTC';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Update chart on currency change
        AnomCAT.updateChart = function() {
            if (!portfolioChart) return;
            
            const chartData = this.generateChartData(30);
            portfolioChart.data.labels = chartData.map(d => {
                const date = new Date(d.time);
                return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            });
            portfolioChart.data.datasets[0].data = chartData.map(d => d.value);
            portfolioChart.update('none');
        };
        
        // Period selector
        document.querySelectorAll('.period-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                // Could implement different period data here
            });
        });
        
        // Deposit form
        document.getElementById('depositForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const amount = parseFloat(document.getElementById('depositAmount').value);
            
            if (AnomCAT.deposit(amount)) {
                document.getElementById('depositAmount').value = '';
                AnomCAT.updateChart();
            } else {
                alert('Please enter a valid amount greater than 0');
            }
        });
        
        // Scroll to deposit
        document.getElementById('depositAction').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('depositCard').scrollIntoView({ behavior: 'smooth' });
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', initChart);
        
        // Listen for currency changes
        window.addEventListener('currencyChanged', function() {
            AnomCAT.updateChart();
        });
    </script>
</body>
</html>
